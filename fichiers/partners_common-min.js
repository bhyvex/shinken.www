window.enquire=function(f){function b(m,k){var o=0,l=m.length,j;for(o;o<l;o++){j=k(m[o],o);if(j===!1){break}}}function h(i){return Object.prototype.toString.apply(i)==="[object Array]"}function d(i){return typeof i=="function"}function a(i){this.initialised=!1,this.options=i,i.deferSetup||this.setup()}function c(j,i){this.query=j,this.isUnconditional=i,this.handlers=[],this.matched=!1}function g(){if(!f){throw new Error("matchMedia is required")}var e=new c("only all");this.queries={},this.listening=!1,this.browserIsIncapable=!e.matchMedia()}return a.prototype={setup:function(i){this.options.setup&&this.options.setup(i),this.initialised=!0},on:function(i){this.initialised||this.setup(i),this.options.match(i)},off:function(i){this.options.unmatch&&this.options.unmatch(i)},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(i){return this.options===i||this.options.match===i}},c.prototype={matchMedia:function(){return f(this.query).matches},addHandler:function(j,i){var k=new a(j);this.handlers.push(k),i&&this.matched&&k.on()},removeHandler:function(i){var j=this.handlers;b(j,function(e,k){if(e.equals(i)){return e.destroy(),!j.splice(k,1)}})},assess:function(i){this.matchMedia()||this.isUnconditional?this.match(i):this.unmatch(i)},match:function(i){if(this.matched){return}b(this.handlers,function(e){e.on(i)}),this.matched=!0},unmatch:function(i){if(!this.matched){return}b(this.handlers,function(e){e.off(i)}),this.matched=!1}},g.prototype={register:function(n,l,p){var k=this.queries,j=p&&this.browserIsIncapable,m=this.listening;return k.hasOwnProperty(n)||(k[n]=new c(n,j),this.listening&&k[n].assess()),d(l)&&(l={match:l}),h(l)||(l=[l]),b(l,function(e){k[n].addHandler(e,m)}),this},unregister:function(j,k){var i=this.queries;return i.hasOwnProperty(j)?(k?i[j].removeHandler(k):(b(this.queries[j].handlers,function(l){l.destroy()}),delete i[j]),this):this},fire:function(j){var i=this.queries,k;for(k in i){i.hasOwnProperty(k)&&i[k].assess(j)}return this},listen:function(j){function k(l){var e;window.addEventListener(l,function(m){e&&clearTimeout(e),e=setTimeout(function(){i.fire(m)},j)})}var i=this;return j=j||500,this.listening?this:(window.addEventListener&&(k("resize"),k("orientationChange")),i.fire(),this.listening=!0,this)}},new g}(window.matchMedia);(function(l,f,a,e,n){var c=function(){l.Modernizr.load([{both:MOBILE_JS_FILES,complete:function(){l.attach_mobile()}}])};if((f.browser.msie&&parseInt(f.browser.version,10)<9)){c()}else{a.register("screen and (max-width: 999px)",{deferSetup:true,setup:function(){c()},match:function(){},unmatch:function(){g();l.detach_mobile()}},false).register("screen and (min-width: 1000px)",{deferSetup:true,setup:function(){e.load([{both:DESKTOP_JS_FILES,complete:function(){}}])},match:function(){},unmatch:function(){l.location.reload()}},true).listen()}var m=f("#overlay");l.show_overlay=function(p){m.find("section").hide();f(p).show();var o=m.detach();i(this,o);l.ga_track(p.replace(/#/,"")+"/")};f("a.modal").click(function(p){p.preventDefault();var o=f(this).attr("href").replace(/.*?(#.*)/g,"$1");l.show_overlay(o);return false});function i(o,q){f("#modal").remove();f(".modalOrigin").removeClass("modalOrigin");var p=('<div id="modal">  <div class="inner">    <button type="button" class="close">      '+n("close")+"    </button>  </div></div>");f("body").addClass("noscroll").append(p);f("#modal .inner").append(q);f("#modal #overlay").fadeIn("fast");f(o).addClass("modalOrigin")}function g(){f("#modal").fadeOut("fast",function(){m.hide();var o=m.detach();f("#overlay-container").append(o);f(this).remove()});f("body").removeClass("noscroll");f(".modalOrigin").focus().remove("modalOrigin")}f(l.document).on("click","#modal .close",g);f(l.document).on("keyup",function(o){if(o.keyCode===27){g()}});f("#sf-form").on("submit",function(p){p.preventDefault();var o=f(this);o.fadeOut("fast",function(){f(".sf-form").addClass("completed");f("#pageslide").scrollTop(0);f(".form-results").fadeIn("fast")});f.ajax({url:o.attr("action"),data:o.serialize(),type:o.attr("method")});l.ga_track("form/submit/")});var b=window.location.pathname.split("/");var d=window.location.search?window.location.search+"&":"?";var j=b[b.length-2];var k=b[1];var h;l.ga_track=function(o){if(l._gaq){if(h!==o){l._gaq.push(["_trackPageview","/"+k+"/firefox/partners/"+o]);h=o}}};f('a[rel="external"]').click(function(p){p.preventDefault();var o=f(this).data("windowOpts");if(o){window.open(this.href,"_blank",f(this).data("windowOpts"))}else{window.open(this.href)}})})(window,window.jQuery,window.enquire,window.Modernizr,window.trans);